<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Pacer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 font-roboto">
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const exercisesList = [
            "Squat", "Deadlift", "Pulldown", "Row", "Benchpress", "Shoulderpress", 
            "Bicep Curls", "Tricep Extensions", "Ham Curl", "Glute Thrust", 
            "Shrugs", "Chest Fly", "Delt Fly"
        ];

        const App = () => {
            const [page, setPage] = useState('home');
            const [workout, setWorkout] = useState([]);
            const [currentExercise, setCurrentExercise] = useState('');
            const [currentSet, setCurrentSet] = useState({ reps: 0, weight: 0, exertion: 0 });
            const [history, setHistory] = useState([]);
            const [liveWorkout, setLiveWorkout] = useState([]);
            const [timer, setTimer] = useState(0);
            const [isResting, setIsResting] = useState(false);
            const [savedWorkouts, setSavedWorkouts] = useState([]);
            const [workoutName, setWorkoutName] = useState('');

            useEffect(() => {
                let interval;
                if (isResting) {
                    interval = setInterval(() => {
                        setTimer(prevTime => prevTime + 1);
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [isResting]);

            const addExercise = () => {
                setWorkout([...workout, { name: currentExercise, sets: [] }]);
                setCurrentExercise('');
            };

            const addSet = (exerciseIndex) => {
                const newWorkout = workout.map((exercise, index) => {
                    if (index === exerciseIndex) {
                        return { ...exercise, sets: [...exercise.sets, { reps: 0, weight: 0, rest: 0 }] };
                    }
                    return exercise;
                });
                setWorkout(newWorkout);
            };

            const handleSetChange = (exerciseIndex, setIndex, field, value) => {
                const newWorkout = workout.map((exercise, index) => {
                    if (index === exerciseIndex) {
                        const newSets = exercise.sets.map((set, i) => i === setIndex ? { ...set, [field]: value } : set);
                        return { ...exercise, sets: newSets };
                    }
                    return exercise;
                });
                setWorkout(newWorkout);
            };

            const startWorkout = () => {
                setPage('workout');
            };

            const completeSet = () => {
                const currentSet = workout[0].sets[0]; // Example: first exercise, first set
                setTimer(currentSet.rest);
                setIsResting(true);
            };

            const finishWorkout = () => {
                setHistory([...history, { workout, date: new Date() }]);
                setPage('home');
            };

            const startLiveWorkout = () => {
                setPage('liveWorkout');
            };

            const completeLiveSet = () => {
                setIsResting(true);
                setTimer(0);
            };

            const restDone = () => {
                setIsResting(false);
                const existingExerciseIndex = liveWorkout.findIndex(set => set.exercise === currentExercise);
                if (existingExerciseIndex !== -1) {
                    const updatedLiveWorkout = liveWorkout.map((set, index) => {
                        if (index === existingExerciseIndex) {
                            return {
                                ...set,
                                reps: `${set.reps}, ${currentSet.reps}`,
                                weight: `${set.weight}, ${currentSet.weight}`,
                                exertion: `${set.exertion}, ${currentSet.exertion}`,
                                rest: `${set.rest}, ${timer}`,
                                totalSets: (set.totalSets || 1) + 1
                            };
                        }
                        return set;
                    });
                    setLiveWorkout(updatedLiveWorkout);
                } else {
                    setLiveWorkout([...liveWorkout, { exercise: currentExercise, ...currentSet, rest: timer, totalSets: 1 }]);
                }
                setCurrentExercise('');
                setCurrentSet({ reps: 0, weight: 0, exertion: 0 });
                setTimer(0);
            };

            const finishLiveWorkout = () => {
                setHistory([...history, { liveWorkout, date: new Date() }]);
                setLiveWorkout([]);
                setPage('home');
            };

            const saveWorkout = () => {
                setSavedWorkouts([...savedWorkouts, { name: workoutName, workout }]);
                setWorkoutName('');
            };

            const loadWorkout = (savedWorkout) => {
                setWorkout(savedWorkout.workout);
                setPage('workout');
            };

            return (
                <div className="container mx-auto p-4">
                    {page === 'home' && (
                        <div className="text-center">
                            <h1 className="text-4xl font-bold mb-4">Fitness Pacer</h1>
                            <button onClick={() => setPage('createWorkout')} className="bg-blue-500 text-white px-4 py-2 rounded m-2">Create Your Workout</button>
                            <button onClick={() => setPage('liveWorkout')} className="bg-green-500 text-white px-4 py-2 rounded m-2">Live Workout</button>
                            <button onClick={() => setPage('history')} className="bg-gray-500 text-white px-4 py-2 rounded m-2">View History</button>
                            <button onClick={() => setPage('savedWorkouts')} className="bg-yellow-500 text-white px-4 py-2 rounded m-2">Saved Workouts</button>
                        </div>
                    )}

                    {page === 'createWorkout' && (
                        <div>
                            <h2 className="text-2xl font-bold mb-4">Create Your Workout</h2>
                            <div className="mb-4">
                                <label className="block mb-2">Select Exercise</label>
                                <select value={currentExercise} onChange={(e) => setCurrentExercise(e.target.value)} className="border p-2 rounded w-full">
                                    <option value="">-- Select Exercise --</option>
                                    {exercisesList.map((exercise, index) => (
                                        <option key={index} value={exercise}>{exercise}</option>
                                    ))}
                                </select>
                                <input type="text" placeholder="Or enter custom exercise" className="border p-2 rounded w-full mt-2" value={currentExercise} onChange={(e) => setCurrentExercise(e.target.value)} />
                                <button onClick={addExercise} className="bg-blue-500 text-white px-4 py-2 rounded mt-2">Add Exercise</button>
                            </div>
                            {workout.map((exercise, exerciseIndex) => (
                                <div key={exerciseIndex} className="mb-4">
                                    <h3 className="font-bold">{exercise.name}</h3>
                                    {exercise.sets.map((set, setIndex) => (
                                        <div key={setIndex} className="mb-4">
                                            <h4 className="font-bold">Set {setIndex + 1}</h4>
                                            <div className="flex space-x-2">
                                                <div className="w-1/4">
                                                    <label className="block mb-1">Reps</label>
                                                    <input type="number" placeholder="Reps" value={set.reps} onChange={(e) => handleSetChange(exerciseIndex, setIndex, 'reps', e.target.value)} className="border p-2 rounded w-full" />
                                                </div>
                                                <div className="w-1/4">
                                                    <label className="block mb-1">Weight</label>
                                                    <input type="number" placeholder="Weight" value={set.weight} onChange={(e) => handleSetChange(exerciseIndex, setIndex, 'weight', e.target.value)} className="border p-2 rounded w-full" />
                                                </div>
                                                <div className="w-1/4">
                                                    <label className="block mb-1">Rest Time</label>
                                                    <input type="number" placeholder="Rest Time" value={set.rest} onChange={(e) => handleSetChange(exerciseIndex, setIndex, 'rest', e.target.value)} className="border p-2 rounded w-full" />
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                    <button onClick={() => addSet(exerciseIndex)} className="bg-blue-500 text-white px-4 py-2 rounded">Add Set</button>
                                </div>
                            ))}
                            <div className="mb-4">
                                <input type="text" placeholder="Workout Name" className="border p-2 rounded w-full mt-2" value={workoutName} onChange={(e) => setWorkoutName(e.target.value)} />
                                <button onClick={saveWorkout} className="bg-yellow-500 text-white px-4 py-2 rounded mt-2">Save Workout</button>
                            </div>
                            <div className="mb-4">
                                <button onClick={startWorkout} className="bg-green-500 text-white px-4 py-2 rounded">Start Workout</button>
                            </div>
                            <button onClick={() => setPage('home')} className="bg-gray-500 text-white px-4 py-2 rounded">Back to Menu</button>
                        </div>
                    )}

                    {page === 'workout' && (
                        <div>
                            <h2 className="text-2xl font-bold mb-4">Workout</h2>
                            {workout.map((exercise, exerciseIndex) => (
                                <div key={exerciseIndex} className="mb-4">
                                    <h3 className="font-bold">{exercise.name}</h3>
                                    {exercise.sets.map((set, setIndex) => (
                                        <div key={setIndex} className="mb-4">
                                            <h4 className="font-bold">Set {setIndex + 1}</h4>
                                            <p>Reps: {set.reps}</p>
                                            <p>Weight: {set.weight}</p>
                                            <p>Rest Time: {set.rest}</p>
                                        </div>
                                    ))}
                                </div>
                            ))}
                            {isResting ? (
                                <div className="text-center mb-4">
                                    <h3 className="text-xl font-bold">Rest Time: {timer}s</h3>
                                </div>
                            ) : (
                                <button onClick={completeSet} className="bg-blue-500 text-white px-4 py-2 rounded">Complete Set</button>
                            )}
                            <button onClick={finishWorkout} className="bg-green-500 text-white px-4 py-2 rounded">Finish Workout</button>
                        </div>
                    )}

                    {page === 'liveWorkout' && (
                        <div>
                            <h2 className="text-2xl font-bold mb-4">Live Workout</h2>
                            <div className="mb-4">
                                <label className="block mb-2">Select Exercise</label>
                                <select value={currentExercise} onChange={(e) => setCurrentExercise(e.target.value)} className="border p-2 rounded w-full">
                                    <option value="">-- Select Exercise --</option>
                                    {exercisesList.map((exercise, index) => (
                                        <option key={index} value={exercise}>{exercise}</option>
                                    ))}
                                </select>
                                <input type="text" placeholder="Or enter custom exercise" className="border p-2 rounded w-full mt-2" value={currentExercise} onChange={(e) => setCurrentExercise(e.target.value)} />
                            </div>
                            <div className="mb-4">
                                <h3 className="font-bold">{currentExercise}</h3>
                                <div className="flex space-x-2">
                                    <div className="w-1/4">
                                        <label className="block mb-1">Reps</label>
                                        <input type="number" placeholder="Reps" value={currentSet.reps} onChange={(e) => setCurrentSet({ ...currentSet, reps: e.target.value })} className="border p-2 rounded w-full" />
                                    </div>
                                    <div className="w-1/4">
                                        <label className="block mb-1">Weight</label>
                                        <input type="number" placeholder="Weight" value={currentSet.weight} onChange={(e) => setCurrentSet({ ...currentSet, weight: e.target.value })} className="border p-2 rounded w-full" />
                                    </div>
                                    <div className="w-1/4">
                                        <label className="block mb-1">Exertion Level (1-10)</label>
                                        <input type="number" placeholder="Exertion Level (1-10)" value={currentSet.exertion} onChange={(e) => setCurrentSet({ ...currentSet, exertion: e.target.value })} className="border p-2 rounded w-full" />
                                    </div>
                                </div>
                            </div>
                            <button onClick={completeLiveSet} className="bg-blue-500 text-white px-4 py-2 rounded">Start Rest</button>
                            {isResting && (
                                <div className="text-center mb-4">
                                    <h3 className="text-xl font-bold">Rest Timer: {timer}s</h3>
                                    <button onClick={restDone} className="bg-green-500 text-white px-4 py-2 rounded">Rest Done</button>
                                </div>
                            )}
                            <div className="mb-4">
                                <h2 className="text-2xl font-bold mb-4">Live Workout Log</h2>
                                {liveWorkout.map((set, index) => (
                                    <div key={index} className="mb-4 border p-4 rounded">
                                        <h3 className="font-bold">{set.exercise} - Total Sets: {set.totalSets}</h3>
                                        <p>Reps: {set.reps}</p>
                                        <p>Weight: {set.weight}</p>
                                        <p>Exertion Level: {set.exertion}</p>
                                        <p>Rest Time: {set.rest}s</p>
                                    </div>
                                ))}
                            </div>
                            <button onClick={finishLiveWorkout} className="bg-green-500 text-white px-4 py-2 rounded">Finish Workout</button>
                            <button onClick={() => setPage('home')} className="bg-gray-500 text-white px-4 py-2 rounded">Back to Menu</button>
                        </div>
                    )}

                    {page === 'history' && (
                        <div>
                            <h2 className="text-2xl font-bold mb-4">Workout History</h2>
                            {history.map((entry, index) => (
                                <div key={index} className="mb-4 border p-4 rounded">
                                    <h3 className="font-bold">Workout on {entry.date.toLocaleString()}</h3>
                                    {entry.liveWorkout ? (
                                        entry.liveWorkout.map((set, setIndex) => (
                                            <div key={setIndex} className="mb-4">
                                                <h4 className="font-bold">{set.exercise} - Total Sets: {set.totalSets}</h4>
                                                <p>Reps: {set.reps}</p>
                                                <p>Weight: {set.weight}</p>
                                                <p>Exertion Level: {set.exertion}</p>
                                                <p>Rest Time: {set.rest}s</p>
                                            </div>
                                        ))
                                    ) : (
                                        entry.workout.map((exercise, exerciseIndex) => (
                                            <div key={exerciseIndex} className="mb-4">
                                                <h3 className="font-bold">{exercise.name} - Total Sets: {exercise.sets.length}</h3>
                                                {exercise.sets.map((set, setIndex) => (
                                                    <div key={setIndex} className="mb-4">
                                                        <h4 className="font-bold">Set {setIndex + 1}</h4>
                                                        <p>Reps: {set.reps}</p>
                                                        <p>Weight: {set.weight}</p>
                                                        <p>Rest Time: {set.rest}</p>
                                                    </div>
                                                ))}
                                            </div>
                                        ))
                                    )}
                                    <button onClick={() => setHistory(history.filter((_, i) => i !== index))} className="bg-red-500 text-white px-4 py-2 rounded mt-2">Delete</button>
                                </div>
                            ))}
                            <button onClick={() => setPage('home')} className="bg-gray-500 text-white px-4 py-2 rounded">Back to Menu</button>
                        </div>
                    )}

                    {page === 'savedWorkouts' && (
                        <div>
                            <h2 className="text-2xl font-bold mb-4">Saved Workouts</h2>
                            {savedWorkouts.map((savedWorkout, index) => (
                                <div key={index} className="mb-4 border p-4 rounded">
                                    <h3 className="font-bold">{savedWorkout.name}</h3>
                                    <button onClick={() => loadWorkout(savedWorkout)} className="bg-blue-500 text-white px-4 py-2 rounded mt-2">Load Workout</button>
                                </div>
                            ))}
                            <button onClick={() => setPage('home')} className="bg-gray-500 text-white px-4 py-2 rounded">Back to Menu</button>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</body>
</html>
